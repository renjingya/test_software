# 软件详细设计
## 1 引言
本文档介绍了软件的详细设计原理。
## 2 内部函数设计
### 2.1 sin()函数设计
#### 2.1.1 设计思路
sin函数可以表示成傅里叶级数的展开式，且通项公式可概括为输入值的奇数次幂的累加。
这里我们使用泰勒展开式去近似所要计算的三角函数值，展开的项越多，精度越高，但计算的时间也会更长。
可以根据需求动态调整precision的值来改变精度。<br>
#### 2.1.2 sin函数的泰勒展开式
![sin函数泰勒展开式]()
#### 2.1.3 函数设计流程图如下
![sin函数流程图](https://github.com/renjingya/tri-func/blob/main/images/sin%E6%B5%81%E7%A8%8B%E5%9B%BE.png)

### 2.2 cos()函数设计
#### 2.2.1 设计思路
cos函数可以表示成傅里叶级数的展开式，且通项公式可概括为输入值的偶数次幂的累加。
这里我们使用泰勒展开式去近似所要计算的三角函数值，展开的项越多，精度越高，但计算的时间也会更长。
可以根据需求动态调整precision的值来改变精度。<br>
#### 2.2.2 cos函数的泰勒展开式
![cos函数泰勒展开式]()
#### 2.2.3 函数设计流程图如下
![cos函数流程图](https://github.com/renjingya/tri-func/blob/main/images/cos%E6%B5%81%E7%A8%8B%E5%9B%BE.png)


### 2.3 arcsin()函数设计
#### 2.3.1 设计思路
该函数有两种设计方案，第一种是根据泰勒公式计算，但是通过运算发现，泰勒展开式不是有效的逼近arcsin(x)的方法。
而arctan()的收敛效果好，通过把靠近收敛边界的x转化到接近级数的展开点x=0，来提高收敛速度。此次设计采用arctan()与arcsin()的关系进行计算。<br>
#### 2.3.2 设计原理
1、当输入值在[-0.5,0.5]内时，采用公式：<br>
![arcsin函数公式1]()<br>
2、当输入值在[-1,-0.5)内时，采用公式：<br>
![arcsin函数公式2]()<br>
3、当输入值在(0.5,1]内时，采用公式：<br>
![arcsin函数公式3]()<br>
#### 2.3.3 函数设计流程图如下
![arcsin函数流程图](https://github.com/renjingya/tri-func/blob/main/images/arcsin%E6%B5%81%E7%A8%8B%E5%9B%BE.png)

### 2.4 arctan()函数设计
#### 2.4.1 设计思路
arctan函数的构造是依赖于上面的sin和cos函数。
首先，对输入的值进行判断，若这个值等于0，根据arctan函数的性质，即对应的角度值就等于0；
若输入的值不等于0，就要分为两个部分，第一个部分，a>0，设置一个值i=0.1，进行一个while循环，每跳出一次循环就能确定一个值，这个值是用于计算在弧度制下对应的一个数值。<br>
比如，输入的值是 ，在弧度值里面对应1.047197……，第一次跳出循环后，就会得到第一个数字等于1，以此类推，进行10次循环，就会得到一个精确值，按照一般来说，只需要得到小数点后四位就能得到比较准确的值，但是本设计为了更精确一点，取到了小数点后9位。这是第一个循环，第二个循环就是如何确定这个值。
设置ai=0，在while循环下，每循环一次都会进行ai=ai+i。在循环中判断 ， 如果成立，则跳出循环，代表这个值一定在ai和ai+i这个之间，所以就取当前这个ai的值作为最后的值。若a<0，就进行相反的操作，ai=ai-1， 。通过相同的步骤就能得到最后的值，基于arctan的流程图如下所示。
#### 2.4.2 函数设计流程图如下
![arctan函数流程图](https://github.com/renjingya/tri-func/blob/main/images/arctan%E6%B5%81%E7%A8%8B%E5%9B%BE.png)

## 2 外部界面设计
### 2.1 设计目标和任务
1、在输入一个（正负）数后，可以实现科学计算函数，包括正弦sin、余弦cos、反正弦arcsin、反正切arctan四个三角函数的计算，并能将结果显示在界面上。<br>
2、实现基本的整数以及小数加法、减法运算。<br>
### 2.2 设计原理
1、数字键设计：0-9<br>
输入一个数字，首先实现读入数字，然后将其显示为原数字展示在显示屏上。<br>
2、小数点函数设计：<br>
输入小数点后，读入此小数点，并将其显示为小数点展示在显示屏上。<br>
3、三角函数设计：<br>
输入数字后，读入三角函数按钮，将其已经输入的数字转换为非字符串形式，调用已有的三角函数，计算出结果，将计算结果展示在显示屏上。<br>
4、退位（back）设计：<br>
读入退位操作后，将已经输入的数字定义为字符串，计算输入数字长度，将长度减去一再进行输出，将结果展示在显示屏上。<br>
5、清屏（clear）设计：<br>
读入清屏操作后，将显示屏中已有的数字或者符号清空，显示为空白。<br>
6、等号设计：<br>
读入等号操作后，调用matlab中已有的等号函数，将已经输入的运算式计算出结果，并且展示在显示屏上。<br>
### 2.3 各功能界面设计
GUI设计界面如下：<br>
![界面]()
### 2.4 设计流程图
![界面设计流程图]()



